function wpjb_ls_jobs_init(){var e=jQuery;e(".wpjb-ls-query").keyup(function(){wpjb_ls_jobs()});e(".wpjb-ls-category").change(function(){e(".wpjb-ls-category-title").html(e(this).find("option:selected").text());wpjb_ls_jobs()});e(".wpjb-ls-type").click(function(){e(".wpjb-ls-type-main").html(e(this).html());e(".wpjb-ls-type").removeClass("wpjb-ls-checked");e(this).addClass("wpjb-ls-checked");wpjb_ls_jobs();return false});e(".wpjb-ls-type-main").click(function(){return false});e("#wpjb-paginate-links").hide();wpjb_ls_jobs()}function wpjb_ls_jobs(e){var t=jQuery;if(WpjbXHR){WpjbXHR.abort()}var n=null;if(typeof e=="undefined"){n=1}else{n=parseInt(t(".wpjb-ls-load-more a.btn").data("wpjb-page"))}var r=t.extend({},WPJB_SEARCH_CRITERIA);r.action="wpjb_jobs_search";r.page=n;WPJB_SEARCH_CRITERIA.filter="active";if(t(".wpjb-ls-query").val().length>0){r.query=t(".wpjb-ls-query").val();WPJB_SEARCH_CRITERIA.query=r.query}if(t(".wpjb-ls-type.wpjb-ls-checked").length>0){r.type=[];t(".wpjb-ls-type.wpjb-ls-checked").each(function(){if(t(this).data("wpjb-id")!="0"){r.type.push(t(this).data("wpjb-id"));WPJB_SEARCH_CRITERIA.type=r.type}})}if(t(".wpjb-ls-category").length&&t(".wpjb-ls-category").val().length>0){r.category=t(".wpjb-ls-category").val();WPJB_SEARCH_CRITERIA.category=r.category}t("#wpjb-job-list").css("opacity","0.4");WpjbXHR=t.ajax({type:"POST",data:r,url:ajaxurl,dataType:"json",success:function(e){var n=parseInt(e.total);var r=parseInt(e.page)+1;var i=parseInt(e.perPage);var s=0;t(".wpjb-subscribe-rss input[name=feed]").val(e.url.feed);t(".wpjb-subscribe-rss a.wpjb-button.btn").attr("href",e.url.feed);if(n==0){t("#wpjb-job-list tbody").html('<tr><td colspan="3">'+WpjbLiveSearchLocale.no_jobs_found+"</td></tr>");return}var o=i;if(r==2){t("#wpjb-job-list tbody").empty()}t("#wpjb-job-list tr.wpjb-ls-load-more").remove();t("#wpjb-job-list").css("opacity","1");t("#wpjb-job-list tbody").append(e.html);s=t("#wpjb-job-list tr").length;var u=n-s;if(u>i){o=i}else if(u>0){o=u}else{o=0}if(o){var a=WpjbLiveSearchLocale.load_x_more.replace("%d",o);t("#wpjb-job-list tbody").append('<tr class="wpjb-ls-load-more"><td colspan="6"><a href="#" data-wpjb-page="'+r+'" class="btn">'+a+"</a></td></tr>");t("#wpjb-job-list tr.wpjb-ls-load-more a").click(wpjb_ls_jobs)}}});return false}function wpjb_ls_resumes_init(){var e=jQuery;e(".wpjb-ls-query").keyup(function(){wpjb_ls_resumes()});e(".wpjb-ls-category").change(function(){e(".wpjb-ls-category-title").html(e(this).find("option:selected").text());wpjb_ls_resumes()});e("#wpjb-paginate-links").hide();wpjb_ls_resumes()}function wpjb_ls_resumes(e){var t=jQuery;if(WpjbXHR){WpjbXHR.abort()}var n=null;if(typeof e=="undefined"){n=1}else{n=parseInt(t(".wpjb-ls-load-more a.btn").data("wpjb-page"))}var r={action:"wpjb_resumes_search",page:n};if(t(".wpjb-ls-query").val().length>0){r.query=t(".wpjb-ls-query").val()}if(parseInt(t(".wpjb-ls-category").val())>0){r.category=parseInt(t(".wpjb-ls-category").val())}t("#wpjb-resume-list").css("opacity","0.4");WpjbXHR=t.ajax({type:"POST",data:r,url:ajaxurl,dataType:"json",success:function(e){var n=parseInt(e.total);var r=parseInt(e.page)+1;var i=parseInt(e.perPage);var s=0;if(n==0){t("#wpjb-resume-list").html('<tr><td colspan="3">'+WpjbLiveSearchLocale.no_resumes_found+"</td></tr>");return}var o=i;if(r==2){t("#wpjb-resume-list tbody").empty()}t("#wpjb-resume-list tr.wpjb-ls-load-more").remove();t("#wpjb-resume-list").css("opacity","1");t("#wpjb-resume-list tbody").append(e.html);s=t("#wpjb-resume-list tr").length;var u=n-s;if(u>i){o=i}else if(u>0){o=u}else{o=0}if(o){var a=WpjbLiveSearchLocale.load_x_more.replace("%d",o);t("#wpjb-resume-list tbody").append('<tr class="wpjb-ls-load-more"><td colspan="3"><a href="#" data-wpjb-page="'+r+'" class="btn">'+a+"</a></td></tr>");t("#wpjb-resume-list tr.wpjb-ls-load-more a").click(wpjb_ls_resumes)}}});return false}var WpjbXHR=null